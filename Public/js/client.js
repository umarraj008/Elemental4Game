const socket=io();var game={ranked:!1,points:0,health:0,turn:!1,winner:null,over:!1,whichPlayerAmI:null,map:0,player2:{health:100,points:5,turn:!1,action:null,gamerTag:null,skillLevel:0,perkBarValue:0},characterType:null,player2characterType:null,win:null,id:null,hitDelay:700,levelUp:!1,xpGain:0,perkBarValue:0,showPerkActivated:{toggle:!1,gamertag:null,perk:null},attackButtonsDisabled:!1,myData:{firstName:null,lastName:null,DOB:null,email:null,gamerTag:null,gamesWon:null,gamesLost:null,xpLevel:null,perksUnlocked:null,nextLevel:null,perkPoints:null,skillLevel:null},loggedIn:!1,notifValue:0,chatHidden:!0},whatCharacterWasI=null,whatMapWasIt=null,matchTimer=0,roundIndicator=!0,skillLevelGain=0,perkCount=0;function matchmake(e){e&&socket.emit("ranked-matchmake"),e||socket.emit("matchmake"),sceneManager.matchmaking=!0}function stopMatchmaking(){socket.emit("stop-matchmaking")}function selectPlayer(e){whatCharacterWasI=e,socket.emit("player-selected",{id:game.id,type:e}),game.characterType=e}function action(e){game.points>=[0,6,3,4,5,15,0][e]&&(socket.emit("player-action",{id:game.id,action:e}),game.turn=!1)}function resetGame(){setTimeout(function(){gameID="",game={ranked:!1,points:0,health:0,turn:!1,winner:null,over:!1,whichPlayerAmI:null,map:0,player2:{health:100,points:5,turn:!1,action:null,gamerTag:null,skillLevel:0,perkBarValue:0},characterType:null,player2characterType:null,win:null,id:null,hitDelay:700,levelUp:!1,myData:game.myData,loggedIn:!1,xpGain:0,perkBarValue:0,showPerkActivated:{toggle:!1,gamertag:null,perk:null},attackButtonsDisabled:!1},sceneManager.player1Animator=void 0,sceneManager.player2Animator=void 0,sceneManager.player1HealthBar.value=0,sceneManager.player2HealthBar.value=0,game.notifValue=0,matchTimer=0,roundIndicator=!0},1e3),sceneManager.matchmaking=!1}function login(e,a){socket.emit("join-server",{email:e,password:a})}function loggedIn(e){socket.emit("join-server",e)}function logout(){sessionStorage.clear(),game.loggedIn=!1,location.reload()}function usePerk(){socket.emit("use-perk",game.id)}function buyPerk(e){game.myData.perkPoints>=sceneManager.perkDescription[sceneManager.selectedPerk].price&&!sceneManager.perkButtons[e].bought&&socket.emit("buy-perk",e)}function activatePerk(e){let a=game.myData.perksUnlocked.split(",");if(1==a[e]){for(i=0;i<a.length;i++)if(2==a[i]){a[i]="1";break}a[e]=2,game.myData.perksUnlocked=a[0]+","+a[1]+","+a[2]+","+a[3]+","+a[4]+","+a[5]+","+a[6]+","+a[7]+","+a[8],socket.emit("activate-perk",e),updatePerkButtons()}}function updatePerkButtons(){sceneManager.perkButtons.forEach(e=>{e.bought=!1});let e=game.myData.perksUnlocked.split(",");for(perkCount=0,i=0;i<e.length;i++)"0"!=e[i]&&perkCount++;for(let a=0;a<sceneManager.perkDescription.length;a++)sceneManager.perkButtons[a].style="disabled",sceneManager.perkActivateButton.style="disabled",1==e[a]&&(sceneManager.perkButtons[a].style="normal"),2==e[a]&&(sceneManager.perkButtons[a].style="bought");1==e[sceneManager.selectedPerk]&&(sceneManager.perkActivateButton.style="normal"),game.myData.perkPoints>=sceneManager.perkDescription[sceneManager.selectedPerk].price&&0==e[sceneManager.selectedPerk]?sceneManager.perkBuyButton.style="normal":sceneManager.perkBuyButton.style="disabled"}function showTextChat(){document.getElementById("textChatContainer").style.display="block",document.getElementById("textChatHide").style.display="block",document.getElementById("textChatShow").style.display="none",document.getElementById("notif").style.display="none",game.notifValue=0,game.chatHidden=!1}function hideTextChat(){document.getElementById("textChatContainer").style.display="none",document.getElementById("textChatHide").style.display="none",document.getElementById("textChatShow").style.display="block",game.chatHidden=!0}function sendMessageTextChat(){let e=document.getElementById("textChatInput"),a=e.value;if(!(a.length<1)&&null!=game.id){let n={id:game.id,message:game.myData.gamerTag+": "+a+"\n"};socket.emit("send-text-chat",n),e.value=""}}function loadSettings(){30==SETTINGS.frameRate?(sceneManager.settingsButtons.frameRate30FPS.style="selected",sceneManager.settingsButtons.frameRate60FPS.style="disabled"):60==SETTINGS.frameRate&&(sceneManager.settingsButtons.frameRate30FPS.style="disabled",sceneManager.settingsButtons.frameRate60FPS.style="selected"),1==SETTINGS.windParticles?(sceneManager.settingsButtons.windParticlesOn.style="selected",sceneManager.settingsButtons.windParticlesOff.style="disabled"):(sceneManager.settingsButtons.windParticlesOn.style="disabled",sceneManager.settingsButtons.windParticlesOff.style="selected"),1==SETTINGS.debrisParticles?(sceneManager.settingsButtons.debrisParticlesOn.style="selected",sceneManager.settingsButtons.debrisParticlesOff.style="disabled"):(sceneManager.settingsButtons.debrisParticlesOn.style="disabled",sceneManager.settingsButtons.debrisParticlesOff.style="selected"),1==SETTINGS.movingBackground?(sceneManager.settingsButtons.movingBackgroundOn.style="selected",sceneManager.settingsButtons.movingBackgroundOff.style="disabled"):(sceneManager.settingsButtons.movingBackgroundOn.style="disabled",sceneManager.settingsButtons.movingBackgroundOff.style="selected"),1==SETTINGS.textIndicators?(sceneManager.settingsButtons.textIndicatorsOn.style="selected",sceneManager.settingsButtons.textIndicatorsOff.style="disabled"):(sceneManager.settingsButtons.textIndicatorsOn.style="disabled",sceneManager.settingsButtons.textIndicatorsOff.style="selected"),1==SETTINGS.fullscreen?(sceneManager.settingsButtons.fullscreenOn.style="selected",sceneManager.settingsButtons.fullscreenOff.style="disabled"):(sceneManager.settingsButtons.fullscreenOn.style="disabled",sceneManager.settingsButtons.fullscreenOff.style="selected")}function loadAccessFeatures(){0==SETTINGS.colorBlindness?(sceneManager.accessPageColorBlindnessNoneButton.style="selected",sceneManager.accessPageColorBlindness1Button.style="disabled",sceneManager.accessPageColorBlindness2Button.style="disabled",sceneManager.accessPageColorBlindness3Button.style="disabled"):1==SETTINGS.colorBlindness?(sceneManager.accessPageColorBlindnessNoneButton.style="disabled",sceneManager.accessPageColorBlindness1Button.style="selected",sceneManager.accessPageColorBlindness2Button.style="disabled",sceneManager.accessPageColorBlindness3Button.style="disabled"):2==SETTINGS.colorBlindness?(sceneManager.accessPageColorBlindnessNoneButton.style="disabled",sceneManager.accessPageColorBlindness1Button.style="disabled",sceneManager.accessPageColorBlindness2Button.style="selected",sceneManager.accessPageColorBlindness3Button.style="disabled"):3==SETTINGS.colorBlindness&&(sceneManager.accessPageColorBlindnessNoneButton.style="disabled",sceneManager.accessPageColorBlindness1Button.style="disabled",sceneManager.accessPageColorBlindness2Button.style="disabled",sceneManager.accessPageColorBlindness3Button.style="selected"),0==SETTINGS.language?(sceneManager.accessPageLanguage1.style="selected",sceneManager.accessPageLanguage2.style="disabled",sceneManager.accessPageLanguage3.style="disabled",sceneManager.accessPageLanguage4.style="disabled",sceneManager.accessPageLanguage5.style="disabled",sceneManager.accessPageLanguage6.style="disabled",loadLanguage(0)):1==SETTINGS.language?(sceneManager.accessPageLanguage1.style="disabled",sceneManager.accessPageLanguage2.style="selected",sceneManager.accessPageLanguage3.style="disabled",sceneManager.accessPageLanguage4.style="disabled",sceneManager.accessPageLanguage5.style="disabled",sceneManager.accessPageLanguage6.style="disabled",loadLanguage(1)):2==SETTINGS.language?(sceneManager.accessPageLanguage1.style="disabled",sceneManager.accessPageLanguage2.style="disabled",sceneManager.accessPageLanguage3.style="selected",sceneManager.accessPageLanguage4.style="disabled",sceneManager.accessPageLanguage5.style="disabled",sceneManager.accessPageLanguage6.style="disabled",loadLanguage(2)):3==SETTINGS.language?(sceneManager.accessPageLanguage1.style="disabled",sceneManager.accessPageLanguage2.style="disabled",sceneManager.accessPageLanguage3.style="disabled",sceneManager.accessPageLanguage4.style="selected",sceneManager.accessPageLanguage5.style="disabled",sceneManager.accessPageLanguage6.style="disabled",loadLanguage(3)):4==SETTINGS.language?(sceneManager.accessPageLanguage1.style="disabled",sceneManager.accessPageLanguage2.style="disabled",sceneManager.accessPageLanguage3.style="disabled",sceneManager.accessPageLanguage4.style="disabled",sceneManager.accessPageLanguage5.style="selected",sceneManager.accessPageLanguage6.style="disabled",loadLanguage(4)):5==SETTINGS.language&&(sceneManager.accessPageLanguage1.style="disabled",sceneManager.accessPageLanguage2.style="disabled",sceneManager.accessPageLanguage3.style="disabled",sceneManager.accessPageLanguage4.style="disabled",sceneManager.accessPageLanguage5.style="disabled",sceneManager.accessPageLanguage6.style="selected",loadLanguage(5)),sceneManager.cursorHightlight?(sceneManager.accessPageCursorHighlightOn.style="selected",sceneManager.accessPageCursorHighlightOff.style="disabled"):(sceneManager.accessPageCursorHighlightOn.style="disabled",sceneManager.accessPageCursorHighlightOff.style="selected"),colorBlindMode?(sceneManager.accessPageColorBlindModeOn.style="selected",sceneManager.accessPageColorBlindModeOff.style="disabled"):(sceneManager.accessPageColorBlindModeOn.style="disabled",sceneManager.accessPageColorBlindModeOff.style="selected")}function loadLanguage(e){switch(e){case 0:CURRENT_LANGUAGE=LANGUAGE.english;break;case 1:CURRENT_LANGUAGE=LANGUAGE.spanish;break;case 2:CURRENT_LANGUAGE=LANGUAGE.french;break;case 3:CURRENT_LANGUAGE=LANGUAGE.italian;break;case 4:CURRENT_LANGUAGE=LANGUAGE.chinese;break;case 5:CURRENT_LANGUAGE=LANGUAGE.japanese}sceneManager.updateAllText()}function requestLeaderboard(){socket.emit("request-leaderboard")}function profileSearchBar(e,a){e?setTimeout(function(){document.getElementById("profileSearchBarContainer").style.display="flex"},a):setTimeout(function(){document.getElementById("profileSearchBarContainer").style.display="none"},a)}function searchForPlayer(){let e=document.getElementById("profileSearchBar").value;e.length<=0?document.getElementById("profileSearchBar").value="":e.length>=15?document.getElementById("profileSearchBar").value="":socket.emit("request-profile",e)}socket.on("connect",function(){if(null!=game.id&&0!=game.map&&0!=sceneManager.scene)return void location.reload();let e=window.sessionStorage.getItem("email"),a=window.sessionStorage.getItem("firstName"),n=window.sessionStorage.getItem("lastName"),t=window.sessionStorage.getItem("gamerTag"),s=window.sessionStorage.getItem("DOB");if(null!=e||null!=e&&null!=a||null!=a&&null!=n||null!=n&&null!=t||null!=t&&null!=s||null!=s){loggedIn({email:e,firstName:a,lastName:n,gamerTag:t,DOB:s,sessionLoggedIn:!0}),document.getElementById("loginContainer").style.display="none"}}),socket.on("disconnect",function(){console.log("disconnected to server"),sceneManager.errorMessageHandler.makeError(CURRENT_LANGUAGE.errorMessages[0])}),socket.on("pick-character",function(e){stopMusic(),sceneManager.scene=6,game.id=e.gameID,game.map=e.map,game.player2.gamerTag=e.p2GT,sceneManager.player1HealthBar.changeValue(100),sceneManager.player2HealthBar.changeValue(100),document.getElementById("textChatShow").style.display="block",whatMapWasIt=game.map,game.ranked=e.ranked}),socket.on("player2-turn",function(){}),socket.on("player1-turn",function(){}),socket.on("game-update",function(e){game.action=e.action,game.player2.action=e.p2Action,null==e.action&&null==e.action||(nullroundIndicator=!0);let a=game.health-e.health,n=game.player2.health-e.p2Health;switch(game.perkBarValue=e.perkBarValue,game.player2.perkBarValue=e.p2PerkBarValue,window.setTimeout(function(){game.points=e.points,game.health=e.health<=0?0:e.health,game.turn=e.turn,game.player2.points=e.p2Points,game.player2.health=e.p2Health<=0?0:e.p2Health,game.player2.turn=e.p2Turn,sceneManager.player1PerkBar.changeValue(game.perkBarValue),sceneManager.player2PerkBar.changeValue(game.player2.perkBarValue),(game.health<=0||game.player2.health<=0)&&(game.turn=!1)},game.hitDelay),game.action){case"idle":sceneManager.player1Animator.switchAnimation("idle");break;case"attack1":sceneManager.player1Animator.switchAnimation("attack1",sceneManager.player2Animator,sceneManager.player2HealthBar,e.p2Health,sceneManager.player2PerkBar,e.p2PerkBarValue);break;case"attack2":sceneManager.player1Animator.switchAnimation("attack2",sceneManager.player2Animator,sceneManager.player2HealthBar,e.p2Health,sceneManager.player2PerkBar,e.p2PerkBarValue);break;case"attack3":sceneManager.player1Animator.switchAnimation("attack3",sceneManager.player2Animator,sceneManager.player2HealthBar,e.p2Health,sceneManager.player2PerkBar,e.p2PerkBarValue);break;case"attack4":sceneManager.player1Animator.switchAnimation("ultimate",sceneManager.player2Animator,sceneManager.player2HealthBar,e.p2Health,sceneManager.player2PerkBar,e.p2PerkBarValue);break;case"wait":sceneManager.player1Animator.switchAnimation("wait"),sceneManager.player1HealthBar.changeValue(e.health),sceneManager.player1PerkBar.changeValue(e.perkBarValue),sceneManager.indicators.makeIndicator("+2 Points",500,c.height/2,"rgba(0,255,100,0"),sceneManager.indicators.makeIndicator("+10 Health",500,c.height/2+20,"rgba(0,255,100,0");break;case"heal":sceneManager.player1HealthBar.changeValue(e.health),sceneManager.player1PerkBar.changeValue(e.perkBarValue),sceneManager.player1Animator.switchAnimation("heal"),sceneManager.indicators.makeIndicator("+30 Health",500,c.height/2,"rgba(0,255,100,0");break;case"damage":switch(game.player2.action){case"attack1":setTimeout(function(){sceneManager.indicators.makeIndicator("-"+a+" Damage",500,c.height/2,"rgba(255,0,0,0")},sceneManager.player2Animator.animations.damageTime1);break;case"attack2":setTimeout(function(){sceneManager.indicators.makeIndicator("-"+a+" Damage",500,c.height/2,"rgba(255,0,0,0")},sceneManager.player2Animator.animations.damageTime2);break;case"attack3":setTimeout(function(){sceneManager.indicators.makeIndicator("-"+a+" Damage",500,c.height/2,"rgba(255,0,0,0")},sceneManager.player2Animator.animations.damageTime3);break;case"attack4":setTimeout(function(){sceneManager.indicators.makeIndicator("-"+a+" Damage",500,c.height/2,"rgba(255,0,0,0")},sceneManager.player2Animator.animations.damageTime4)}break;case"dead":window.setTimeout(function(){sceneManager.player1Animator.switchAnimation("dead"),sceneManager.player2HealthBar.changeValue(e.p2Health)},2e3)}switch(game.player2.action){case"idle":sceneManager.player2Animator.switchAnimation("idle");break;case"attack1":sceneManager.player2Animator.switchAnimation("attack1",sceneManager.player1Animator,sceneManager.player1HealthBar,e.health,sceneManager.player1PerkBar,e.perkBarValue);break;case"attack2":sceneManager.player2Animator.switchAnimation("attack2",sceneManager.player1Animator,sceneManager.player1HealthBar,e.health,sceneManager.player1PerkBar,e.perkBarValue);break;case"attack3":sceneManager.player2Animator.switchAnimation("attack3",sceneManager.player1Animator,sceneManager.player1HealthBar,e.health,sceneManager.player1PerkBar,e.perkBarValue);break;case"attack4":sceneManager.player2Animator.switchAnimation("ultimate",sceneManager.player1Animator,sceneManager.player1HealthBar,e.health,sceneManager.player1PerkBar,e.perkBarValue);break;case"wait":sceneManager.player2Animator.switchAnimation("wait"),sceneManager.player2HealthBar.changeValue(e.p2Health),sceneManager.player2PerkBar.changeValue(e.p2PerkBarValue),sceneManager.indicators.makeIndicator("+2 Points",1500,c.height/2,"rgba(0,255,100,0"),sceneManager.indicators.makeIndicator("+10 Health",1500,c.height/2+20,"rgba(0,255,100,0");break;case"heal":sceneManager.player2Animator.switchAnimation("heal"),sceneManager.player2HealthBar.changeValue(e.p2Health),sceneManager.player2PerkBar.changeValue(e.p2PerkBarValue),sceneManager.indicators.makeIndicator("+30 Health",1500,c.height/2,"rgba(0,255,100,0");break;case"damage":switch(game.action){case"attack1":setTimeout(function(){sceneManager.indicators.makeIndicator("-"+n+" Damage",1500,c.height/2,"rgba(255,0,0,0")},sceneManager.player1Animator.animations.damageTime1);break;case"attack2":setTimeout(function(){sceneManager.indicators.makeIndicator("-"+n+" Damage",1500,c.height/2,"rgba(255,0,0,0")},sceneManager.player1Animator.animations.damageTime2);break;case"attack3":setTimeout(function(){sceneManager.indicators.makeIndicator("-"+n+" Damage",1500,c.height/2,"rgba(255,0,0,0")},sceneManager.player1Animator.animations.damageTime3);break;case"attack4":setTimeout(function(){sceneManager.indicators.makeIndicator("-"+n+" Damage",1500,c.height/2,"rgba(255,0,0,0")},sceneManager.player1Animator.animations.damageTime4)}break;case"dead":window.setTimeout(function(){sceneManager.player2Animator.switchAnimation("dead"),sceneManager.player1HealthBar.changeValue(e.health)},2e3)}e.turn&&sceneManager.bot&&(sceneManager.botSelected=!1)}),socket.on("game-over",function(e){setTimeout(function(){game.over=!0,game.turn=!1,game.win=e.winner,e.winner?(stopBattleMusic(),sceneManager.playSoundEffect("win")):(stopBattleMusic(),sceneManager.playSoundEffect("lose"))},3e3),setTimeout(function(){sceneManager.scene=8,game.xpGain=e.xpGain,sceneManager.xpHealthBar.maxValue=e.oldNextLevel/100,sceneManager.xpHealthBar.value=e.oldXpLevel/100,sceneManager.xpHealthBar.changeValue(e.newXpLevel),sceneManager.skillLevelHealthBar.maxValue=100,sceneManager.skillLevelHealthBar.value=100*(e.skillLevel/100-Math.floor(e.skillLevel/100)),e.levelUp&&setTimeout(function(){game.levelUp=!0,sceneManager.xpHealthBar.maxValue=e.newNextLevel/100,sceneManager.xpHealthBar.value=e.levelUpNewXpLevel,setTimeout(function(){game.levelUp=!1},3e3)},3e3)},7e3),document.getElementById("textChatShow").style.display="none",game.myData.gamesWon=e.gamesWon,game.myData.gamesLost=e.gamesLost,game.myData.xpLevel=e.levelUpNewXpLevel,game.myData.nextLevel=e.newNextLevel,game.myData.perkPoints=e.perkPoints,skillLevelGain=e.skillLevel-game.myData.skillLevel>=0?"+"+(e.skillLevel-game.myData.skillLevel)+"sr":"-"+Math.abs(e.skillLevel-game.myData.skillLevel)+"sr",game.myData.skillLevel=e.skillLevel,document.getElementById("textChat").value="",document.getElementById("textChatInput").value="",hideTextChat(),document.getElementById("textChatShow").style.display="none",game.id=null}),socket.on("game-cancelled",function(){sceneManager.scene=4,document.getElementById("textChatShow").style.display="none",resetGame()}),socket.on("your-player",function(e){game.whichPlayerAmI=e.which,game.player2.gamerTag=e.p2GT,game.player2.skillLevel=e.p2SL,game.player2.nextLevel=e.p2NL,game.player2.xpLevel=e.p2XP}),socket.on("other-player-character",function(e){game.player2characterType=e,0==e?e="fire":1==e?e="water":2==e?e="earth":3==e&&(e="air"),sceneManager.player2Animator="earth"==e?new Animator(e,sceneManager.character2X+250,sceneManager.character2Y-270,-1.4*sceneManager.characterWidth,1.4*sceneManager.characterHeight):new Animator(e,sceneManager.character2X,sceneManager.character2Y,-sceneManager.characterWidth,sceneManager.characterHeight)}),socket.on("you-win",function(e){setTimeout(function(){game.over=!0,game.turn=!1,game.win=!0},3e3),setTimeout(function(){sceneManager.scene=8},7e3)}),socket.on("you-lose",function(){setTimeout(function(){game.over=!0,game.turn=!1,game.win=!1},3e3),setTimeout(function(){sceneManager.scene=8},7e3)}),socket.on("logged-in",function(e){game.myData.firstName=e.firstName,game.myData.lastName=e.lastName,game.myData.DOB=e.DOB,game.myData.email=e.email,game.myData.gamerTag=e.gamerTag,game.myData.gamesWon=e.gamesWon,game.myData.gamesLost=e.gamesLost,game.myData.xpLevel=e.xpLevel,game.myData.perksUnlocked=e.perksUnlocked,game.myData.perkPoints=e.perkPoints,game.myData.skillLevel=e.skillLevel,game.myData.nextLevel=e.nextLevel,game.loggedIn=!0,sessionStorage.setItem("firstName",e.firstName),sessionStorage.setItem("lastName",e.lastName),sessionStorage.setItem("DOB",e.DOB),sessionStorage.setItem("email",e.email),sessionStorage.setItem("gamerTag",e.gamerTag),sessionStorage.setItem("gamesWon",e.gamesWon),sessionStorage.setItem("gamesLost",e.gamesLost),sessionStorage.setItem("xpLevel",e.xpLevel),sessionStorage.setItem("perksUnlocked",e.perksUnlocked),sessionStorage.setItem("perkPoints",e.perkPoints),sessionStorage.setItem("skillLevel",e.skillLevel),document.getElementById("loginContainer").style.display="none",sceneManager.scene=0}),socket.on("login-failed",function(e){sceneManager.errorMessageHandler.makeError(CURRENT_LANGUAGE.errorMessages[e]),console.log(e),alert(e),console.log(sessionStorage),logout()}),socket.on("perk-buy-success",function(e){game.myData.perkPoints=e.perkPoints,game.myData.perksUnlocked=e.perksUnlocked,sceneManager.perkConfirmWindow=!1,updatePerkButtons()}),socket.on("perk-buy-failed",function(){sceneManager.errorMessageHandler.makeError("Failed to Buy Perk.")}),socket.on("update-data",function(e){game.myData.gamesWon=e.gamesWon,game.myData.gamesLost=e.gamesLost,game.myData.xpLevel=e.xpLevel,game.myData.perkPoints=e.perkPoints,game.myData.nextLevel=e.nextLevel,game.myData.skillLevel=e.skillLevel,game.perkBarValue=e.perkBarValue}),socket.on("update-chat",function(e){let a=document.getElementById("textChat");if(a.value+=e,a.scrollTop=a.scrollHeight,game.chatHidden){let e=document.getElementById("notif");game.notifValue++,e.innerHTML=game.notifValue,e.style.display="block"}}),socket.on("removed-from-matchmaking",function(){sceneManager.matchmaking=!1}),socket.on("recieve-leaderboard",function(e){e.error?sceneManager.errorMessageHandler.makeError(CURRENT_LANGUAGE.errorMessage[e.errorMessage]):((sceneManager.leaderboard1.length<=0||sceneManager.leaderboard2.length<=0||sceneManager.leaderboard3.length<=0||null==sceneManager.leaderboard1[0].gamertag||null==sceneManager.leaderboard2[0].gamertag||null==sceneManager.leaderboard3[0].gamertag)&&(sceneManager.errorMessageHandler.makeError("Error Loading Leaderboard"),sceneManager.camera.transitionTo(4,.005)),sceneManager.leaderboard1=e.leaderboard1,sceneManager.leaderboard2=e.leaderboard2,sceneManager.leaderboard3=e.leaderboard3)}),socket.on("perk-activated",function(e){game.showPerkActivated.toggle=!0,game.showPerkActivated.gamertag=e.gamertag,game.showPerkActivated.perk=e.perk,e.id==socket.id?(game.perkBarValue=0,sceneManager.player1PerkBar.changeValue(0),e.pointChange&&(game.points=e.points),e.healthChange&&(game.health=e.health,sceneManager.player1HealthBar.changeValue(game.health))):(game.player2.perkBarValue=0,sceneManager.player2PerkBar.changeValue(0),e.pointChange&&(game.player2.points=e.points),e.healthChange&&(game.player2.health=e.health,sceneManager.player2HealthBar.changeValue(game.player2.health)),"Just Wait"==e.perk&&(game.attackButtonsDisabled=!0)),sceneManager.playSoundEffect("activatePerk"),setTimeout(function(){game.showPerkActivated.toggle=!1},4e3)}),socket.on("recieve-profile",function(e){e.error?sceneManager.errorMessageHandler.makeError(CURRENT_LANGUAGE.profile.errorMessage):(sceneManager.profilePlayer=e.player,sceneManager.camera.transitionTo(13,.005),profileSearchBar(!1,50),document.getElementById("profileSearchBar").value="")}),socket.on("just-wait-over",function(){game.attackButtonsDisabled=!1});